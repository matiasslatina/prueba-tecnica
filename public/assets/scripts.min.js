const modal=document.getElementById("myModal"),divModal=document.getElementById("modalContent"),divTableContent=document.getElementById("divTableContent"),span=document.getElementsByClassName("close")[0];function deleteUser(userId){if(confirm("Realmente deseas eliminar este usuario?")){let data=new FormData,url="/users/destroy";data.append("userId",userId);let request=new Request(url,{method:"POST",body:data,headers:new Headers});fetch(request).then(response=>response.text()).then(responseText=>{console.log(responseText),"USER_DESTROY"===responseText?document.getElementById(userId+"TrTable").style.display="none":alert("El usuario no pudo ser eliminado.")})}}function editUserModal(userId){let data=new FormData,url="/users/show";divModal.innerHTML=null,data.append("userId",userId);let request=new Request(url,{method:"POST",body:data,headers:new Headers});fetch(request).then(response=>response.text()).then(responseText=>divModal.innerHTML=responseText),modal.style.display="block"}function newUserModal(){let url="/users/new";divModal.innerHTML=null;let request=new Request(url,{method:"POST",headers:new Headers});fetch(request).then(response=>response.text()).then(responseText=>divModal.innerHTML=responseText),modal.style.display="block"}function updateUser(){if(document.getElementById("pass")){let pass,passRepeat;if(document.getElementById("pass").value!==document.getElementById("repeat_pass").value)return void alert("las claves no son coincidentes!")}let form=document.getElementById("userForm"),url=form.action,data=new FormData(form),request=new Request(url,{method:"POST",body:data,headers:new Headers});fetch(request).then(response=>response.text()).then(responseText=>{"USER_EXIST"===responseText?alert("El correo que intentas cargar ya se encuentra ocupado! intenta nuevamente."):(divTableContent.innerHTML=responseText,filterTableUsers(),modal.style.display="none",divModal.innerHTML=null)})}function filterTableUsers(){let input,filter,table,tr,td,i;for(input=document.getElementById("myInput"),filter=input.value.toUpperCase(),table=document.getElementById("myTable"),tr=table.getElementsByTagName("tr"),i=0;i<tr.length;i++){for(var tds=tr[i].getElementsByTagName("td"),flag=!1,j=0;j<tds.length;j++)td=tds[j],td.innerHTML.toUpperCase().indexOf(filter)>-1&&(flag=!0);tr[i].style.display=flag?"":"none"}}span.onclick=function(){modal.style.display="none"},window.onclick=function(event){event.target==modal&&(modal.style.display="none")};